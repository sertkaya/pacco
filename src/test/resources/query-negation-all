PREFIX wd: <http://www.wikidata.org/entity/> 
PREFIX ex: <http://example.org/> 
PREFIX wdt: <http://www.wikidata.org/prop/direct/> 

# negation of all quantifier
# it is not the case that, does not have a P40 successor which is not E (all P40 successors are E)

SELECT DISTINCT ?s WHERE { 
    ?s ?p [].
    FILTER NOT EXISTS {
      FILTER NOT EXISTS {
        ?s wdt:P40 ?o.
        FILTER NOT EXISTS {
          ?o wdt:P31 ex:E.
        }
      }
    }
}


